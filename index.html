<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø­ÙˆØ§Ø± Ø§Ù„ÙÙƒØ±ÙŠ</title>

<!-- IBM Plex Sans Arabic -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans+Arabic:wght@100;200;300;400;500;600;700&display=swap" rel="stylesheet">

<style>
html, body, * { font-family: 'IBM Plex Sans Arabic', Arial, sans-serif !important; }

:root {
    --bg-color: #fbfbfd;
    --text-main: #1d1d1f;
    --text-secondary: #6e6e73;
    --bubble-bg-primary: #f0f0f5;
    --bubble-bg-reply: #ffffff;
    --bubble-bg-reply2: #f9f9fc;
    --shadow-soft: 0 12px 30px rgba(0,0,0,0.08);
    --shadow-hover: 0 20px 60px rgba(0,0,0,0.12);
    --transition: all 0.5s cubic-bezier(0.16,1,0.3,1);
}

/* Dark mode variables */
:root.dark {
    --bg-color: #121212;
    --text-main: #eee;
    --text-secondary: #aaa;
    --bubble-bg-primary: #1e1e1e;
    --bubble-bg-reply: #222;
    --bubble-bg-reply2: #2a2a2a;
    --shadow-soft: 0 12px 30px rgba(0,0,0,0.3);
    --shadow-hover: 0 20px 60px rgba(0,0,0,0.5);
}

/* Body */
body {
    background-color: var(--bg-color);
    color: var(--text-main);
    line-height: 1.8;
    padding: 80px 20px;
    display: flex;
    flex-direction: column;
    align-items: center;
    transition: background-color 0.4s, color 0.4s;
}

/* Dark mode toggle button */
#dark-toggle {
    position: fixed;
    top: 20px;
    left: 20px;
    z-index: 999;
    padding: 8px 14px;
    border-radius: 12px;
    border: none;
    cursor: pointer;
    font-weight: 600;
    background: #000;
    color: #fff;
    opacity: 0.85;
    transition: all 0.3s;
}
#dark-toggle:hover { opacity: 1; }

/* Header */
header {
    max-width: 900px;
    text-align: center;
    margin-bottom: 80px;
    animation: fadeIn 1s ease-out;
}
header h1 { font-size: 3.5rem; font-weight: 700; letter-spacing: -0.045em; margin-bottom: 18px; }
header p { color: var(--text-secondary); font-size: 1.45rem; font-weight: 300; max-width: 650px; margin: 0 auto; }

/* Container */
.container { max-width: 850px; width: 100%; }

/* Threaded Messages */
.message-node { position: relative; margin-bottom: 20px; }
.reply-level-1 { margin-right: 40px; }
.reply-level-2 { margin-right: 80px; }

/* Bubbles */
.bubble {
    padding: 32px 36px;
    border-radius: 28px;
    box-shadow: var(--shadow-soft);
    cursor: pointer;
    transition: var(--transition);
    position: relative;
    word-break: break-word;
}

/* Bubble background colors */
.message-node:first-child .bubble { background: var(--bubble-bg-primary); }
.message-node.reply-level-1 .bubble { background: var(--bubble-bg-reply); }
.message-node.reply-level-2 .bubble { background: var(--bubble-bg-reply2); }

.message-node.reply-level-1 .bubble:hover {
    background: linear-gradient(120deg, #e6f0ff, #ffffff);
}

/* Hover effect */
.bubble:hover { transform: scale(1.02); box-shadow: var(--shadow-hover); }

/* Labels & Text */
.label { display: block; font-size: 0.88rem; font-weight: 600; color: var(--text-secondary); margin-bottom: 10px; }
.text-content { font-size: 1.25rem; font-weight: 400; line-height: 1.75; white-space: pre-wrap; }

/* Click hint */
.click-hint { font-size: 0.85rem; font-weight: 300; color: var(--text-secondary); margin-top: 6px; text-align: left; }

/* Commentary */
.commentary {
    transform: scaleY(0);
    transform-origin: top;
    opacity: 0;
    transition: transform 0.5s cubic-bezier(0.16,1,0.3,1), opacity 0.5s ease;
    background: rgba(0,0,0,0.02);
    border-radius: 0 0 28px 28px;
    margin-top: 6px;
    padding: 0 36px;
    position: relative;
}
.message-node.active .commentary { transform: scaleY(1); opacity:1; padding:28px 36px 36px 36px; margin-top:6px; }

/* Advice Text */
.advice-header { color: var(--text-main); font-weight:500; font-size:1rem; margin-bottom:10px; }
.advice-text { color: var(--text-secondary); font-size:1.15rem; font-weight:300; line-height:1.85; }

/* Sources icon */
.source-icon {
    position: absolute;
    bottom: 12px;
    left: 36px;
    font-size: 0.9rem;
    cursor: pointer;
    color: var(--text-secondary);
    transition: color 0.3s;
}
.source-icon:hover { color: #007aff; }

/* Sources popup */
.sources-popup {
    display: none;
    position: fixed;
    top:50%; left:50%;
    transform: translate(-50%,-50%);
    background: var(--bg-color);
    color: var(--text-main);
    border-radius: 24px;
    padding: 30px 40px;
    box-shadow: 0 20px 60px rgba(0,0,0,0.3);
    max-width: 90%;
    max-height: 80%;
    overflow-y: auto;
    z-index: 1000;
}
.sources-popup h3 { font-weight: 600; margin-bottom: 16px; }
.sources-popup a { display:block; margin-bottom:8px; color:#007aff; text-decoration:none; }
.sources-popup a:hover { text-decoration:underline; }
.sources-popup button { margin-top:15px; padding:6px 12px; border:none; border-radius:10px; cursor:pointer; background:#007aff; color:#fff; }

/* Arrows */
.arrow-icon { position:absolute; left:28px; top:35px; width:22px; height:22px; fill:none; stroke:#d2d2d7; stroke-width:1.5; transition: transform 0.4s, stroke 0.3s; }
.message-node.active .arrow-icon { transform: rotate(180deg); stroke: #000; }

/* Connectors */
.connector { position:absolute; right:-20px; top:-25px; width:18px; height:40px; border-right:1px solid #e0e0e0; border-bottom:1px solid #e0e0e0; border-bottom-right-radius:12px; }

/* Final Panel */
.final-panel {
    margin-top:100px; padding:70px 40px; background:#000; color:#fff; border-radius:40px; text-align:center; box-shadow:0 30px 70px rgba(0,0,0,0.15); animation:fadeIn 1.2s ease-out;
}
.final-panel h2 { font-weight:700; margin-bottom:25px; font-size:2.5rem; }
.final-panel p { color:#86868b; font-weight:300; font-size:1.2rem; line-height:1.8; max-width:550px; margin:0 auto; }

/* Animations */
@keyframes fadeIn { from{opacity:0; transform:translateY(20px);} to{opacity:1; transform:translateY(0);} }

/* Footer */
footer { margin-top:80px; color: var(--text-secondary); font-size:0.9rem; font-weight:200; text-align:center; }

/* Responsive */
@media(max-width:600px){
    header h1{font-size:2.5rem;}
    header p{font-size:1.2rem;}
    .bubble{padding:26px 28px;}
    .reply-level-1,.reply-level-2{margin-right:20px;}
    .commentary{padding:0 28px;}
    .source-icon{left:28px;}
}
</style>
</head>
<body>

<button id="dark-toggle">ğŸŒ™</button>

<header>
    <h1>ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø­ÙˆØ§Ø±</h1>
    <p>Ù†Ø¸Ø±Ø© Ù…ØªØ£Ù…Ù„Ø© ÙÙŠ Ø£Ø³Ù„ÙˆØ¨ Ø§Ù„Ù†Ù‚Ø§Ø´ Ù„ØªØ¹Ø²ÙŠØ² Ø§Ù„Ø­ÙƒÙ…Ø© ÙÙŠ Ø§Ù„Ø±Ø¯</p>
</header>

<div class="container">
    
    <div class="message-node" onclick="toggleNode(this)">
        <div class="bubble">
            <svg class="arrow-icon" viewBox="0 0 24 24"><path d="M6 9l6 6 6-6"/></svg>
            <span class="label">Ø§Ù„Ø·Ø±Ù Ø§Ù„Ø£ÙˆÙ„</span>
            <p class="text-content">"Ù‡Ù†Ø§ ÙŠÙˆØ¶Ø¹ Ø§Ù„Ù†Øµ Ø§Ù„Ø£ØµÙ„ÙŠ Ù„Ù„ØªØ¹Ù„ÙŠÙ‚ Ø§Ù„Ø£ÙˆÙ„ Ø¨ÙƒÙ„ ØªÙØ§ØµÙŠÙ„Ù‡. ÙŠÙ…ÙƒÙ† Ø£Ù† ÙŠÙƒÙˆÙ† Ø§Ù„Ù†Øµ Ø·ÙˆÙŠÙ„ ÙˆÙŠØ­ØªØ§Ø¬ Ù„ÙÙÙƒÙ‘Ù‡ Ø¯Ø§Ø®Ù„ Ø§Ù„Ø¨Ø·Ø§Ù‚Ø©."</p>
            <p class="click-hint">Ø§Ù†Ù‚Ø± Ù„Ù„ØªÙˆØ³Ø¹</p>
        </div>
        <div class="commentary" data-sources="">
            <span class="advice-header">ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø·Ø±Ø­ Ù…Ù† ÙˆØ¬Ù‡Ø© Ù†Ø¸Ø± Ù…ÙˆØ¶ÙˆØ¹ÙŠØ©:</span>
            <p class="advice-text">Ù‡Ù†Ø§ Ù†Ø³ØªØ®Ø¯Ù… ÙˆØ²Ù† Ø§Ù„Ø®Ø· Ø§Ù„Ø®ÙÙŠÙ Ù„Ø´Ø±Ø­ Ø§Ù„Ø³ÙŠØ§Ù‚ Ø§Ù„ÙÙƒØ±ÙŠ Ø¨Ø¹ÙŠØ¯Ø§Ù‹ Ø¹Ù† Ø§Ù„ØªØ­ÙŠØ²ØŒ Ù…Ù…Ø§ ÙŠØ³Ù‡Ù„ Ø§Ø³ØªÙŠØ¹Ø§Ø¨ Ø§Ù„Ø·Ø±Ù Ø§Ù„Ø¢Ø®Ø± Ø­ØªÙ‰ Ù„Ùˆ ÙƒØ§Ù† Ø§Ù„Ù†Øµ Ø·ÙˆÙŠÙ„Ø§Ù‹.</p>
            <span class="source-icon" onclick="showSources(this)">ğŸ“– Ø§Ù„Ù…ØµØ§Ø¯Ø±</span>
        </div>
    </div>

    <div class="message-node reply-level-1" onclick="toggleNode(this)">
        <div class="connector"></div>
        <div class="bubble">
            <svg class="arrow-icon" viewBox="0 0 24 24"><path d="M6 9l6 6 6-6"/></svg>
            <span class="label">Ø£Ù†ØªÙ</span>
            <p class="text-content">"Ù‡Ù†Ø§ ÙŠÙˆØ¶Ø¹ Ø§Ù„Ø±Ø¯ Ø§Ù„Ø°ÙŠ ØªÙØ§Ø¹Ù„ Ø¨Ù‡ Ø§Ù„Ø´Ø®Øµ Ø§Ù„Ù…Ø³Ù„Ù… Ù…Ø¹ Ø§Ù„ÙƒÙ„Ø§Ù… Ø£Ø¹Ù„Ø§Ù‡. ÙŠÙ…ÙƒÙ† Ø£Ù† ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ø´Ø±Ø­ ØªÙØµÙŠÙ„ÙŠ Ø·ÙˆÙŠÙ„."</p>
            <p class="click-hint">Ø§Ù„Ø±Ø¯</p>
        </div>
        <div class="commentary" data-sources="">
            <span class="advice-header">Ù„Ù…Ø§Ø°Ø§ Ù„Ù… ÙŠÙƒÙ† Ù‡Ø°Ø§ Ø§Ù„Ø±Ø¯ Ù…Ø«Ø§Ù„ÙŠØ§Ù‹ØŸ</span>
            <p class="advice-text">Ù†Ù‚Ø¯ Ø¨Ù†Ø§Ø¡ ÙŠÙˆØ¶Ø­ Ù…ÙˆØ§Ø¶Ø¹ Ø§Ù„Ø®Ù„Ù„ ÙÙŠ Ø§Ù„Ø±Ø¯ Ø¨Ø£Ø³Ù„ÙˆØ¨ Ù‡Ø§Ø¯Ø¦ ÙˆØ±Ø§Ù‚ÙŠ.</p>
            <span class="source-icon" onclick="showSources(this)">ğŸ“– Ø§Ù„Ù…ØµØ§Ø¯Ø±</span>
        </div>
    </div>

    <div class="final-panel">
        <h2>Ø®Ù„Ø§ØµØ© Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©</h2>
        <p>Ø¥Ù† Ø§Ù„Ù‡Ø¯Ù Ù…Ù† Ù…Ø±Ø§Ø¬Ø¹Ø© Ù‡Ø°Ø§ Ø§Ù„Ø­ÙˆØ§Ø± Ù‡Ùˆ Ø§Ù„Ø§Ø±ØªÙ‚Ø§Ø¡ Ø¨Ø§Ù„ÙƒÙ„Ù…Ø©ØŒ ÙØ§Ù„Ù…Ø³Ù„Ù… ÙƒØ§Ù„ØºÙŠØ« Ø­ÙŠØ«Ù…Ø§ ÙˆÙ‚Ø¹ Ù†ÙØ¹ØŒ ÙˆØ§Ù„ÙƒÙ„Ù…Ø© Ø§Ù„Ø·ÙŠØ¨Ø© ØµØ¯Ù‚Ø©.</p>
    </div>

</div>

<footer>
    ØªØµÙ…ÙŠÙ… Ù…Ø®ØµØµ Ù„ØºØ±Ø¶ Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„ÙÙƒØ±ÙŠØ© &copy; 2026
</footer>

<!-- Sources popup -->
<div id="sources-popup" class="sources-popup">
    <h3>Ø§Ù„Ù…ØµØ§Ø¯Ø±</h3>
    <div id="sources-list"></div>
    <button onclick="closeSources()">Ø¥ØºÙ„Ø§Ù‚</button>
</div>

<script>
/* Toggle comment expansion */
function toggleNode(el){
    document.querySelectorAll('.message-node').forEach(node => { if(node !== el) node.classList.remove('active'); });
    el.classList.toggle('active');
}

/* Dark Mode toggle */
const darkToggle = document.getElementById('dark-toggle');
darkToggle.addEventListener('click', () => {
    document.documentElement.classList.toggle('dark');
    if(document.documentElement.classList.contains('dark')){
        localStorage.setItem('darkmode','true');
    } else {
        localStorage.removeItem('darkmode');
    }
});
if(localStorage.getItem('darkmode')==='true'){ document.documentElement.classList.add('dark'); }

/* Sources popup */
function showSources(el){
    const popup = document.getElementById('sources-popup');
    const list = document.getElementById('sources-list');
    list.innerHTML = '';
    const data = el.parentElement.getAttribute('data-sources');
    if(data){
        const urls = data.split(',');
        urls.forEach(url => { 
            const a = document.createElement('a'); 
            a.href = url.trim(); a.target='_blank'; a.textContent = url.trim(); 
            list.appendChild(a);
        });
    } else {
        const p = document.createElement('p');
        p.textContent = 'Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…ØµØ§Ø¯Ø± Ø­Ø§Ù„ÙŠØ§Ù‹';
        list.appendChild(p);
    }
    popup.style.display='block';
}
function closeSources(){ document.getElementById('sources-popup').style.display='none'; }
</script>

</body>
</html>
